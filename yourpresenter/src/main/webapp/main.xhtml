<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j">
<f:view contentType="text/html">
	<h:head>
		<title><ui:insert name="title">Yourpresenter</ui:insert>
		</title>
		<meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
		<rich:jQuery />
	</h:head>
	<h:body>
		<!-- 
			need to focus the 1.st component, solution found in:
			http://iamjosh.wordpress.com/2008/03/10/jquery-focus-on-first-form-element/ 
		-->
		<h:outputScript target="head">
			jQuery(document).ready(function() {
				jQuery(':text:visible:enabled:first').focus();
			});
		</h:outputScript>

		<h:form>
			<h:panelGrid columns="3">
				<h:outputText value="Role:" />
				<h:selectOneRadio value="#{mainView.role}" layout="pageDirection">
					<a4j:ajax event="change" listener="#{mainView.roleChanged}"
						render="schedulePanel okButton" />
					<f:selectItems value="#{mainView.roles}" />
				</h:selectOneRadio>

				<h:panelGroup id="schedulePanel">
					<h:panelGroup rendered="#{mainView.scheduleCreate}">
						<h:panelGrid columns="3">
							<h:outputText value="Create/Choose Schedule:" />
							<rich:autocomplete id="scheduleEnter" mode="client" minChars="2"
								maxChars="30" autofill="true"
								autocompleteMethod="#{mainView.filterScheduleNames}"
								value="#{mainView.scheduleName}">
								<rich:validator event="change" />
							</rich:autocomplete>
							<rich:message for="scheduleEnter" />
						</h:panelGrid>
					</h:panelGroup>

					<!-- <rich:validator event="submit" /> -->
					<h:panelGroup rendered="#{mainView.scheduleChoose}">
						<h:panelGrid columns="3">
							<h:outputText value="Choose Schedule:" />
							<rich:select id="scheduleChoose" enableManualInput="true"
								value="#{mainView.scheduleName}"
								defaultLabel="start typing for select">
								<f:selectItems value="#{mainView.allScheduleNames}" />
							</rich:select>
							<rich:message for="scheduleChoose" />
						</h:panelGrid>
					</h:panelGroup>
				</h:panelGroup>

				<!-- <rich:messages ajaxRendered="true" /> -->

				<h:commandButton value="OK" id="okButton"
					disabled="#{mainView.roleNotChosen}"
					action="#{mainView.submitSchedule}">
					<!-- binding="#{mainView.submitButton}" -->
				</h:commandButton>

			</h:panelGrid>
		</h:form>
	</h:body>
</f:view>
</html>
